# 03. APIä»•æ§˜æ›¸

## ğŸ“‹ æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€æ­´å²çš„å¹´è¡¨APIã®èªè¨¼ãƒ»èªå¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®è©³ç´°ä»•æ§˜ã‚’å®šç¾©ã—ã¾ã™ã€‚

## ğŸ” èªè¨¼ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /auth/register`

**èª¬æ˜**: æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "email": "user@example.com",
  "username": "username",
  "password": "securepassword123",
  "full_name": "John Doe",
  "is_active": true,
  "role": "user"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (201 Created):
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "email": "user@example.com",
  "username": "username",
  "full_name": "John Doe",
  "is_active": true,
  "role": "user",
  "avatar_url": null,
  "bio": null,
  "last_login": null,
  "failed_login_attempts": "0",
  "locked_until": null,
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T00:00:00Z"
}
```

**ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
- `400 Bad Request`: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¾ãŸã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼åãŒé‡è¤‡
- `422 Unprocessable Entity`: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼

### 2. ãƒ­ã‚°ã‚¤ãƒ³

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /auth/login`

**èª¬æ˜**: OAuth2ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ•ãƒ­ãƒ¼ã«ã‚ˆã‚‹ãƒ­ã‚°ã‚¤ãƒ³

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ** (Form Data):
```
username: user@example.com
password: securepassword123
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer",
  "expires_in": 1800,
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
- `401 Unauthorized`: èªè¨¼æƒ…å ±ãŒé–“é•ã£ã¦ã„ã‚‹
- `423 Locked`: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹
- `400 Bad Request`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒéã‚¢ã‚¯ãƒ†ã‚£ãƒ–

### 3. ãƒˆãƒ¼ã‚¯ãƒ³æ›´æ–°

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /auth/refresh`

**èª¬æ˜**: ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ›´æ–°

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer",
  "expires_in": 1800
}
```

**ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
- `401 Unauthorized`: ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ãŒç„¡åŠ¹

### 4. ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /auth/me`

**èª¬æ˜**: ç¾åœ¨ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æƒ…å ±ã‚’å–å¾—

**èªè¨¼**: å¿…é ˆ

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "email": "user@example.com",
  "username": "username",
  "full_name": "John Doe",
  "is_active": true,
  "role": "user",
  "avatar_url": "https://example.com/avatar.jpg",
  "bio": "Software Developer",
  "last_login": "2024-01-01T12:00:00Z",
  "failed_login_attempts": "0",
  "locked_until": null,
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T00:00:00Z"
}
```

**ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
- `401 Unauthorized`: èªè¨¼ã•ã‚Œã¦ã„ãªã„

### 5. ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±æ›´æ–°

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `PUT /auth/me`

**èª¬æ˜**: ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ›´æ–°

**èªè¨¼**: å¿…é ˆ

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "full_name": "Updated Name",
  "bio": "Updated bio",
  "avatar_url": "https://example.com/new-avatar.jpg"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "email": "user@example.com",
  "username": "username",
  "full_name": "Updated Name",
  "is_active": true,
  "role": "user",
  "avatar_url": "https://example.com/new-avatar.jpg",
  "bio": "Updated bio",
  "last_login": "2024-01-01T12:00:00Z",
  "failed_login_attempts": "0",
  "locked_until": null,
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T12:30:00Z"
}
```

### 6. ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /auth/change-password`

**èª¬æ˜**: ç¾åœ¨ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´

**èªè¨¼**: å¿…é ˆ

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ** (Query Parameters):
```
current_password: oldpassword123
new_password: newpassword123
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
{
  "message": "Password changed successfully"
}
```

**ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
- `400 Bad Request`: ç¾åœ¨ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã‚‹
- `401 Unauthorized`: èªè¨¼ã•ã‚Œã¦ã„ãªã„
- `422 Unprocessable Entity`: æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒçŸ­ã™ãã‚‹

### 7. ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /auth/logout`

**èª¬æ˜**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ

**èªè¨¼**: å¿…é ˆ

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
{
  "message": "Logged out successfully"
}
```

## ğŸ‘¥ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /users/`

**èª¬æ˜**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã‚’å–å¾—ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰

**èªè¨¼**: ç®¡ç†è€…æ¨©é™å¿…é ˆ

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `skip`: ã‚¹ã‚­ãƒƒãƒ—æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0ï¼‰
- `limit`: å–å¾—ä»¶æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 100ï¼‰

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
[
  {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "email": "user@example.com",
    "username": "username",
    "full_name": "John Doe",
    "is_active": true,
    "role": "user",
    "avatar_url": null,
    "bio": null,
    "last_login": "2024-01-01T12:00:00Z",
    "failed_login_attempts": "0",
    "locked_until": null,
    "created_at": "2024-01-01T00:00:00Z",
    "updated_at": "2024-01-01T00:00:00Z"
  }
]
```

### 2. ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /users/active`

**èª¬æ˜**: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã‚’å–å¾—ï¼ˆãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚¿ãƒ¼ä»¥ä¸Šï¼‰

**èªè¨¼**: ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚¿ãƒ¼æ¨©é™å¿…é ˆ

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `skip`: ã‚¹ã‚­ãƒƒãƒ—æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0ï¼‰
- `limit`: å–å¾—ä»¶æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 100ï¼‰

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
[
  {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "email": "user@example.com",
    "username": "username",
    "full_name": "John Doe",
    "is_active": true,
    "role": "user",
    "avatar_url": null,
    "bio": null,
    "last_login": "2024-01-01T12:00:00Z",
    "failed_login_attempts": "0",
    "locked_until": null,
    "created_at": "2024-01-01T00:00:00Z",
    "updated_at": "2024-01-01T00:00:00Z"
  }
]
```

### 3. å½¹å‰²åˆ¥ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /users/role/{role}`

**èª¬æ˜**: æŒ‡å®šã•ã‚ŒãŸå½¹å‰²ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã‚’å–å¾—ï¼ˆãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚¿ãƒ¼ä»¥ä¸Šï¼‰

**èªè¨¼**: ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚¿ãƒ¼æ¨©é™å¿…é ˆ

**ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `role`: ãƒ¦ãƒ¼ã‚¶ãƒ¼å½¹å‰²ï¼ˆuser, moderator, adminï¼‰

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `skip`: ã‚¹ã‚­ãƒƒãƒ—æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0ï¼‰
- `limit`: å–å¾—ä»¶æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 100ï¼‰

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
[
  {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "email": "admin@example.com",
    "username": "adminuser",
    "full_name": "Admin User",
    "is_active": true,
    "role": "admin",
    "avatar_url": null,
    "bio": null,
    "last_login": "2024-01-01T12:00:00Z",
    "failed_login_attempts": "0",
    "locked_until": null,
    "created_at": "2024-01-01T00:00:00Z",
    "updated_at": "2024-01-01T00:00:00Z"
  }
]
```

### 4. ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°å–å¾—

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /users/{user_id}`

**èª¬æ˜**: æŒ‡å®šã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è©³ç´°æƒ…å ±ã‚’å–å¾—ï¼ˆè‡ªåˆ†è‡ªèº«ã¾ãŸã¯ç®¡ç†è€…ã®ã¿ï¼‰

**èªè¨¼**: å¿…é ˆï¼ˆè‡ªåˆ†è‡ªèº«ã¾ãŸã¯ç®¡ç†è€…ï¼‰

**ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `user_id`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "email": "user@example.com",
  "username": "username",
  "full_name": "John Doe",
  "is_active": true,
  "role": "user",
  "avatar_url": null,
  "bio": null,
  "last_login": "2024-01-01T12:00:00Z",
  "failed_login_attempts": "0",
  "locked_until": null,
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T00:00:00Z"
}
```

**ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
- `404 Not Found`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚‰ãªã„
- `403 Forbidden`: æ¨©é™ä¸è¶³

### 5. ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `PUT /users/{user_id}`

**èª¬æ˜**: æŒ‡å®šã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ›´æ–°ï¼ˆè‡ªåˆ†è‡ªèº«ã¾ãŸã¯ç®¡ç†è€…ã®ã¿ï¼‰

**èªè¨¼**: å¿…é ˆï¼ˆè‡ªåˆ†è‡ªèº«ã¾ãŸã¯ç®¡ç†è€…ï¼‰

**ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `user_id`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "full_name": "Updated Name",
  "bio": "Updated bio",
  "role": "moderator"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "email": "user@example.com",
  "username": "username",
  "full_name": "Updated Name",
  "is_active": true,
  "role": "moderator",
  "avatar_url": null,
  "bio": "Updated bio",
  "last_login": "2024-01-01T12:00:00Z",
  "failed_login_attempts": "0",
  "locked_until": null,
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T12:30:00Z"
}
```

### 6. ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `DELETE /users/{user_id}`

**èª¬æ˜**: æŒ‡å®šã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰

**èªè¨¼**: ç®¡ç†è€…æ¨©é™å¿…é ˆ

**ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `user_id`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (204 No Content)

**ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
- `404 Not Found`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚‰ãªã„

### 7. ãƒ¦ãƒ¼ã‚¶ãƒ¼æœ‰åŠ¹åŒ–

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /users/{user_id}/activate`

**èª¬æ˜**: æŒ‡å®šã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æœ‰åŠ¹åŒ–ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰

**èªè¨¼**: ç®¡ç†è€…æ¨©é™å¿…é ˆ

**ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `user_id`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "email": "user@example.com",
  "username": "username",
  "full_name": "John Doe",
  "is_active": true,
  "role": "user",
  "avatar_url": null,
  "bio": null,
  "last_login": "2024-01-01T12:00:00Z",
  "failed_login_attempts": "0",
  "locked_until": null,
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T12:30:00Z"
}
```

### 8. ãƒ¦ãƒ¼ã‚¶ãƒ¼ç„¡åŠ¹åŒ–

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /users/{user_id}/deactivate`

**èª¬æ˜**: æŒ‡å®šã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç„¡åŠ¹åŒ–ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰

**èªè¨¼**: ç®¡ç†è€…æ¨©é™å¿…é ˆ

**ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `user_id`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "email": "user@example.com",
  "username": "username",
  "full_name": "John Doe",
  "is_active": false,
  "role": "user",
  "avatar_url": null,
  "bio": null,
  "last_login": "2024-01-01T12:00:00Z",
  "failed_login_attempts": "0",
  "locked_until": null,
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T12:30:00Z"
}
```

### 9. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ãƒƒã‚¯

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /users/{user_id}/lock`

**èª¬æ˜**: æŒ‡å®šã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãƒ­ãƒƒã‚¯ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰

**èªè¨¼**: ç®¡ç†è€…æ¨©é™å¿…é ˆ

**ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `user_id`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `lock_minutes`: ãƒ­ãƒƒã‚¯æ™‚é–“ï¼ˆåˆ†ï¼‰ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 30ï¼‰

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "email": "user@example.com",
  "username": "username",
  "full_name": "John Doe",
  "is_active": true,
  "role": "user",
  "avatar_url": null,
  "bio": null,
  "last_login": "2024-01-01T12:00:00Z",
  "failed_login_attempts": "5",
  "locked_until": "2024-01-01T13:00:00Z",
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T12:30:00Z"
}
```

### 10. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ãƒƒã‚¯è§£é™¤

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /users/{user_id}/unlock`

**èª¬æ˜**: æŒ‡å®šã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ­ãƒƒã‚¯ã‚’è§£é™¤ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰

**èªè¨¼**: ç®¡ç†è€…æ¨©é™å¿…é ˆ

**ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `user_id`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "email": "user@example.com",
  "username": "username",
  "full_name": "John Doe",
  "is_active": true,
  "role": "user",
  "avatar_url": null,
  "bio": null,
  "last_login": "2024-01-01T12:00:00Z",
  "failed_login_attempts": "0",
  "locked_until": null,
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T12:30:00Z"
}
```

## ğŸ“Š çµ±è¨ˆãƒ»åˆ†æã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆå–å¾—

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /users/stats/count`

**èª¬æ˜**: ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆæƒ…å ±ã‚’å–å¾—ï¼ˆãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚¿ãƒ¼ä»¥ä¸Šï¼‰

**èªè¨¼**: ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚¿ãƒ¼æ¨©é™å¿…é ˆ

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
{
  "total_users": 100,
  "active_users": 85,
  "inactive_users": 15
}
```

### 2. å½¹å‰²åˆ¥ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°å–å¾—

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /users/stats/role/{role}/count`

**èª¬æ˜**: æŒ‡å®šã•ã‚ŒãŸå½¹å‰²ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã‚’å–å¾—ï¼ˆãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚¿ãƒ¼ä»¥ä¸Šï¼‰

**èªè¨¼**: ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚¿ãƒ¼æ¨©é™å¿…é ˆ

**ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `role`: ãƒ¦ãƒ¼ã‚¶ãƒ¼å½¹å‰²ï¼ˆuser, moderator, adminï¼‰

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹** (200 OK):
```json
{
  "role": "user",
  "count": 80
}
```

## ğŸ” èªè¨¼æ–¹å¼

### 1. JWTèªè¨¼
- **ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **: HS256
- **æœ‰åŠ¹æœŸé™**: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³30åˆ†ã€ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³7æ—¥
- **ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰**: ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã€ãƒ¡ãƒ¼ãƒ«ã€ãƒ­ãƒ¼ãƒ«ã€ç™ºè¡Œæ™‚åˆ»

### 2. APIã‚­ãƒ¼èªè¨¼
- **ãƒ˜ãƒƒãƒ€ãƒ¼**: `X-API-Key`
- **ç”¨é€”**: ã‚·ã‚¹ãƒ†ãƒ é–“é€šä¿¡ã€ãƒãƒƒãƒå‡¦ç†
- **è¨­å®š**: ç’°å¢ƒå¤‰æ•°`API_KEY`

### 3. OAuth2ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ•ãƒ­ãƒ¼
- **ã‚°ãƒ©ãƒ³ãƒˆã‚¿ã‚¤ãƒ—**: password
- **ã‚¹ã‚³ãƒ¼ãƒ—**: read, write, admin
- **ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥**: è‡ªå‹•ãƒˆãƒ¼ã‚¯ãƒ³æ›´æ–°

## ğŸ“ ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹

### å…±é€šã‚¨ãƒ©ãƒ¼ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```json
{
  "detail": "ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
  "error_code": "ERROR_CODE",
  "timestamp": "2024-01-01T12:00:00Z"
}
```

### HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰

| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ | èª¬æ˜ | ä½¿ç”¨ä¾‹ |
|---------------|------|--------|
| 200 | OK | æ­£å¸¸ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ |
| 201 | Created | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æˆåŠŸ |
| 204 | No Content | ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤æˆåŠŸ |
| 400 | Bad Request | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ |
| 401 | Unauthorized | èªè¨¼å¤±æ•— |
| 403 | Forbidden | æ¨©é™ä¸è¶³ |
| 404 | Not Found | ãƒªã‚½ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚‰ãªã„ |
| 422 | Unprocessable Entity | ãƒªã‚¯ã‚¨ã‚¹ãƒˆå½¢å¼ã‚¨ãƒ©ãƒ¼ |
| 423 | Locked | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ãƒƒã‚¯ |

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [01. èªè¨¼ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](./01-èªè¨¼ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦.md)
- [02. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](./02-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ.md)
- [04. ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³](./04-ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³.md)
- [05. å®Ÿè£…ã‚¬ã‚¤ãƒ‰](./05-å®Ÿè£…ã‚¬ã‚¤ãƒ‰.md) 